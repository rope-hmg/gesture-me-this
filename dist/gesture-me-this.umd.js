(function(c,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(c=typeof globalThis<"u"?globalThis:c||self,s(c["gesture-me-this"]={}))})(this,function(c){"use strict";class s{constructor(t,i){this.x=t,this.y=i}add(t,i=new s(0,0)){return i.x=this.x+t.x,i.y=this.y+t.y,i}add_assign(t){return this.add(t,this)}sub(t,i=new s(0,0)){return i.x=this.x-t.x,i.y=this.y-t.y,i}sub_assign(t){return this.sub(t,this)}mul(t,i=new s(0,0)){return i.x=this.x*t,i.y=this.y*t,i}mul_assign(t){return this.mul(t,this)}div(t,i=new s(0,0)){return this.mul(1/t,i)}div_assign(t){return this.mul_assign(1/t)}neg(t=new s(0,0)){return this.mul(-1,t)}neg_assign(){return this.mul_assign(-1)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}length_sq(){return this.dot(this)}length(){return Math.sqrt(this.length_sq())}normalise(t=new s(0,0)){return this.mul(1/this.length(),t)}normalise_assign(){return this.mul_assign(1/this.length())}copy_from(t){return this.x=t.x,this.y=t.y,this}set(t,i){this.x=t,this.y=i}}class d{constructor(){this.finger_count=0,this.fingers=new Map,this.centroid=new s(0,0)}}class g{constructor(t,i){this.position_delta=new s(0,0),this.centroid_direction=new s(0,0),this.position=new s(t,i)}is_moving_toward_centroid(){return this.position_delta.dot(this.centroid_direction)>0}angle_delta_around_point(t){const i=this.position.sub(this.position_delta).sub_assign(t).normalise_assign(),e=this.position.sub(t).normalise_assign();return Math.acos(i.dot(e))}}class v{constructor(t,i){this.element=t,this.metrics=new d;const e=n=>{var r;n.preventDefault(),this.initialise_touches(n.changedTouches),(r=i.on_start)==null||r.call(i,this.metrics,n)},u=n=>{var r;n.preventDefault(),this.update_touches(n.changedTouches),(r=i.on_move)==null||r.call(i,this.metrics,n)},h=n=>{var r;n.preventDefault(),this.remove_touches(n.changedTouches),(r=i.on_end)==null||r.call(i,this.metrics,n)},_=n=>{var r;n.preventDefault(),this.remove_all_touches(),(r=i.on_cancel)==null||r.call(i,this.metrics,n)};t.addEventListener("touchstart",e),t.addEventListener("touchmove",u),t.addEventListener("touchend",h),t.addEventListener("touchcancel",_),this.on_start=e,this.on_move=u,this.on_end=h,this.on_cancel=_}disableGestures(){this.element.removeEventListener("touchstart",this.on_start),this.element.removeEventListener("touchmove",this.on_move),this.element.removeEventListener("touchmove",this.on_end),this.element.removeEventListener("touchmove",this.on_cancel)}initialise_touches(t){this.metrics.finger_count+=t.length;for(const i of t){const e=new g(i.clientX,i.clientY);this.metrics.fingers.set(i.identifier,e)}this.calculate_centroid()}update_touches(t){for(const i of t){const e=this.metrics.fingers.get(i.identifier);e&&(e.position_delta.set(i.clientX-e.position.x,i.clientY-e.position.y),e.position.set(i.clientX,i.clientY))}this.calculate_centroid()}remove_touches(t){this.metrics.finger_count-=t.length;for(const i of t)this.metrics.fingers.delete(i.identifier);this.calculate_centroid()}remove_all_touches(){this.metrics.finger_count=0,this.metrics.fingers.clear(),this.metrics.centroid.set(0,0)}calculate_centroid(){const{finger_count:t,fingers:i,centroid:e}=this.metrics;e.set(0,0);for(const u of i.values())e.add_assign(u.position);t>1&&e.div_assign(t);for(const u of i.values())e.sub(u.position,u.centroid_direction)}}var f=(o=>(o[o.Inward=0]="Inward",o[o.Outward=1]="Outward",o))(f||{});const p={sensitivity:.5},y=(o,t)=>{const{exact_finger_count:i,sensitivity:e=.5}=t??p,u=!!i&&o.finger_count===i||!i&&o.finger_count>1;let h;if(u){const _=o.fingers.values();let{value:n,done:r}=_.next(),m=n.is_moving_toward_centroid(),l=!0;for(;!r&&l;)l=m===n.is_moving_toward_centroid(),{value:n,done:r}=_.next();if(l){const w=m?0:1;let a=0;for(const x of o.fingers.values())a+=x.position_delta.length();a/=o.finger_count,a*=e,h={strength:a,direction:w}}}return h?{is_recognised:!0,metrics:h}:{is_recognised:!1}};c.Finger=g,c.GestureController=v,c.Metrics=d,c.PinchDirection=f,c.Vector=s,c.pinch_zoom=y,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=gesture-me-this.umd.js.map
